---
title: 'Устройство строк в Go'
description: 'Внутреннее уствойство строк, неизменяемость, руны и UTF-8.'
category: 'Golang'
date: '2026-02-02'
---

В Go строки (`string`) являются неизменяемыми последовательностями байтов. После создания строки её содержимое нельзя изменить.
Строки в Go поддерживают работу с UTF-8.

1. **Строки в Go** представляют собой неизменяемые последовательности байтов (uint8), закодированных в UTF-8.
2. **Неизменяемость строк** означает, что для изменения строки нужно создавать новую строку.
3. **Работа с символами**: Для работы с символами Unicode используйте тип `rune`.

## Неизменяемость строк

- **Иммутабельность**: После создания строки её содержимое нельзя изменить.
- **Причины**: Безопасность (исключает случайное изменение) и Эффективность (безопасная передача между горутинами, оптимизация памяти).

## Пример использования

```go
str := "Привет, мир!"
fmt.Println(str)           // Вывод: Привет, мир!
fmt.Println(len(str))      // Выводит длину строки в байтах
fmt.Println(str[0])        // Выводит первый байт строки (не символ!)
```

- `len(str)`: Длина в байтах. Для "Привет, мир!" это больше, чем количество символов (кириллица занимает 2 байта на символ).
- `str[0]`: Первый байт.

## Работа со строками и символами

### Руны (rune)

В Go символы Unicode представлены типом `rune` (alias `int32`). Руна может занимать от 1 до 4 байтов в UTF-8.

### Преобразование строки в руны

Чтобы работать с символами, преобразуйте строку в срез рун:

```go
str := "Привет"
runes := []rune(str)
fmt.Println(len(runes)) // Выводит количество символов в строке
```

## Сравнение строк

Строки сравниваются с помощью `==` и `!=`. Сравнение идет побайтово.

## Особенности строк в Go

1. **Срезы байтов**: Строку можно преобразовать в `[]byte` для манипуляции.

    ```go
    str := "Пример"
    bytes := []byte(str)
    bytes[0] = 'п' // Изменение байта
    newStr := string(bytes)
    ```

2. **Изменение через руны**:

    ```go
    str := "Привет"
    runes := []rune(str)
    runes[0] = 'п'
    newStr := string(runes)
    ```

## Копирование строк

В Go строки копируются при присваивании, но так как они неизменяемы, фактически копируется только дескриптор строки (указатель и длина), а сами данные не дублируются в памяти, пока не создается новая измененная строка.

```go
str1 := "Hello"
str2 := str1 // Указывают на одни и те же данные
```
