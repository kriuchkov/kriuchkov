---
title: 'Golang Runtime'
description: 'Обзор рантайма Go: управление памятью, планировщик и взаимодействие с ОС.'
category: 'Golang'
date: '2026-02-02'
---

**Рантайм (runtime)** в Go — это встроенная часть среды выполнения, которая отвечает за управление низкоуровневыми аспектами программы, такими как планирование горутин, управление памятью, сборка мусора (garbage collection), взаимодействие с операционной системой, а также выполнение многих других системных функций. Рантайм Go встроен в каждый бинарный файл программы, написанной на Go, и обеспечивает её работу.

## Основные компоненты рантайма в Go

1. **Планировщик горутин**:
    - Управляет выполнением горутин (G).
    - Распределяет G по потокам ОС (M) с использованием процессоров (P).
    - Реализует модель M:N (много горутин на несколько потоков).

2. **Сборка мусора (Garbage Collection)**:
    - Автоматически освобождает неиспользуемую память.
    - Работает конкурентно (concurrent mark and sweep) с минимальными паузами (Stop-The-World).

3. **Управление памятью**:
    - Использует свой аллокатор (tcmalloc-like).
    - Управляет стеком горутин (динамически растущий стек).

4. **Взаимодействие с ОС**:
    - Системные вызовы, обработка сигналов.
    - Кроссплатформенная абстракция.

5. **Профилирование и отладка**:
    - Инструменты `pprof`, `trace`.

## Как работает планировщик Go?

Планировщик использует модель **G-M-P**:

- **G (Goroutine)**: Легковесный поток выполнения.
- **M (Machine)**: Поток операционной системы.
- **P (Processor)**: Логический контекст выполнения (ресурсы).

Планировщик распределяет горутины по очередям (локальные очереди P и глобальная очередь) и назначает их на потоки M. Использует технику **Work Stealing** для балансировки нагрузки.

## Примеры функций рантайма

- `runtime.Gosched()`: Уступить процессор.
- `runtime.Goexit()`: Завершить горутину.
- `runtime.GOMAXPROCS()`: Установить количество P.
- `runtime.NumGoroutine()`: Количество горутин.
